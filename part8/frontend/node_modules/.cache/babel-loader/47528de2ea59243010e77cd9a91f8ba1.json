{"ast":null,"code":"var _jsxFileName = \"/home/agustin/Documents/GitHub/fullstackOpen22/part8/frontend/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { ApolloClient, ApolloProvider, HttpLink, InMemoryCache, split } from '@apollo/client';\nimport App from './App';\nimport { setContext } from '@apollo/client/link/context';\nimport { getMainDefinition } from '@apollo/client/utilities';\nimport { GraphQLWsLink } from '@apollo/client/link/subscriptions';\nimport { createClient } from 'graphql-ws';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst authLink = setContext((_, _ref) => {\n  let {\n    headers\n  } = _ref;\n  const token = localStorage.getItem('token');\n  return {\n    headers: { ...headers,\n      authorization: token ? `Bearer ${token}` : null\n    }\n  };\n});\nconst httpLink = new HttpLink({\n  uri: 'http://localhost:4000'\n});\nconst wsLink = new GraphQLWsLink(createClient({\n  url: 'ws://localhost:4000'\n}));\nconst splitLink = split(_ref2 => {\n  let {\n    query\n  } = _ref2;\n  const definition = getMainDefinition(query);\n  return definition.kind === 'OperationDefinition' && definition.operation === 'subscription';\n}, wsLink, authLink.concat(httpLink));\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link: splitLink\n});\nReactDOM.createRoot(document.getElementById('root')).render( /*#__PURE__*/_jsxDEV(ApolloProvider, {\n  client: client,\n  children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 41,\n  columnNumber: 5\n}, this));","map":{"version":3,"names":["React","ReactDOM","ApolloClient","ApolloProvider","HttpLink","InMemoryCache","split","App","setContext","getMainDefinition","GraphQLWsLink","createClient","authLink","_","headers","token","localStorage","getItem","authorization","httpLink","uri","wsLink","url","splitLink","query","definition","kind","operation","concat","client","cache","link","createRoot","document","getElementById","render"],"sources":["/home/agustin/Documents/GitHub/fullstackOpen22/part8/frontend/src/index.js"],"sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport { ApolloClient, ApolloProvider, HttpLink, InMemoryCache, split } from '@apollo/client'\nimport App from './App'\nimport { setContext } from '@apollo/client/link/context'\nimport { getMainDefinition } from '@apollo/client/utilities'\nimport { GraphQLWsLink } from '@apollo/client/link/subscriptions'\nimport { createClient } from 'graphql-ws'\n\nconst authLink = setContext((_, { headers }) => {\n    const token = localStorage.getItem('token')\n    return {\n        headers: {\n            ...headers,\n            authorization: token ? `Bearer ${token}` : null,\n        }\n    }\n})\n\nconst httpLink = new HttpLink({ uri: 'http://localhost:4000' })\n\nconst wsLink = new GraphQLWsLink( createClient({ url:'ws://localhost:4000' }) )\n\nconst splitLink = split(({ query }) => {\n    const definition = getMainDefinition(query)\n    return (\n        definition.kind === 'OperationDefinition' &&\n        definition.operation === 'subscription'\n    )\n    },\n    wsLink,\n    authLink.concat(httpLink)\n)\n\nconst client = new ApolloClient({\n    cache: new InMemoryCache(),\n    link: splitLink\n})\n\nReactDOM.createRoot(document.getElementById('root')).render(\n    <ApolloProvider client={client}>\n        <App />\n    </ApolloProvider>\n)\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,SAASC,YAAT,EAAuBC,cAAvB,EAAuCC,QAAvC,EAAiDC,aAAjD,EAAgEC,KAAhE,QAA6E,gBAA7E;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,SAASC,iBAAT,QAAkC,0BAAlC;AACA,SAASC,aAAT,QAA8B,mCAA9B;AACA,SAASC,YAAT,QAA6B,YAA7B;;AAEA,MAAMC,QAAQ,GAAGJ,UAAU,CAAC,CAACK,CAAD,WAAoB;EAAA,IAAhB;IAAEC;EAAF,CAAgB;EAC5C,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;EACA,OAAO;IACHH,OAAO,EAAE,EACL,GAAGA,OADE;MAELI,aAAa,EAAEH,KAAK,GAAI,UAASA,KAAM,EAAnB,GAAuB;IAFtC;EADN,CAAP;AAMH,CAR0B,CAA3B;AAUA,MAAMI,QAAQ,GAAG,IAAIf,QAAJ,CAAa;EAAEgB,GAAG,EAAE;AAAP,CAAb,CAAjB;AAEA,MAAMC,MAAM,GAAG,IAAIX,aAAJ,CAAmBC,YAAY,CAAC;EAAEW,GAAG,EAAC;AAAN,CAAD,CAA/B,CAAf;AAEA,MAAMC,SAAS,GAAGjB,KAAK,CAAC,SAAe;EAAA,IAAd;IAAEkB;EAAF,CAAc;EACnC,MAAMC,UAAU,GAAGhB,iBAAiB,CAACe,KAAD,CAApC;EACA,OACIC,UAAU,CAACC,IAAX,KAAoB,qBAApB,IACAD,UAAU,CAACE,SAAX,KAAyB,cAF7B;AAIC,CANkB,EAOnBN,MAPmB,EAQnBT,QAAQ,CAACgB,MAAT,CAAgBT,QAAhB,CARmB,CAAvB;AAWA,MAAMU,MAAM,GAAG,IAAI3B,YAAJ,CAAiB;EAC5B4B,KAAK,EAAE,IAAIzB,aAAJ,EADqB;EAE5B0B,IAAI,EAAER;AAFsB,CAAjB,CAAf;AAKAtB,QAAQ,CAAC+B,UAAT,CAAoBC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAApB,EAAqDC,MAArD,eACI,QAAC,cAAD;EAAgB,MAAM,EAAEN,MAAxB;EAAA,uBACI,QAAC,GAAD;IAAA;IAAA;IAAA;EAAA;AADJ;EAAA;EAAA;EAAA;AAAA,QADJ"},"metadata":{},"sourceType":"module"}